<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../testing-data/pb-data-faker.html">
<link rel="import" href="../components/pb-time-series-chart.html">
<link rel="import" href="../components/pb-calendar.html">
<link rel="import" href="../components/pb-project-term.html">
<link rel="import" href="../components/pb-card.html">
<link rel="import" href="../components/pb-table.html">
<link rel="import" href="../components/pb-project-name.html">
<link rel="import" href="../components/pb-project-phase.html">
<dom-module id="pb-components-demo">

    <template>
        <style>
             :host {
                display: block;
            }
            
            text {
                font-family: 'CA Sans', 'Helvetica', 'sans-serif';
            }
        </style>
        <button on-click='generateNewChartData'>Change Data</button> <button on-click='generatePlaceHolderData'>Create Simulated Placeholder</button>
        <pb-time-series-chart data={{chartData}} add-proj-mode=true placeholder-dates={{placeholderData}}></pb-time-series-chart>
        <button on-click='updateSelectedDate'>changeDate</button>
        <pb-calendar month-timestamp={{monthTimestamp}} selected-date={{selectedDate}}></pb-calendar>
        <pb-project-term selected-date-range='{{placeholderData}}'></pb-project-term>
        <pb-card cost=1234 label="something"></pb-card>
        <pb-table headers={{tableHeaders}} data={{tableData}}></pb-table>
        <pb-project-name project-name="PiggyBank"></pb-project-name>
        <pb-project-phase phase="seed2" selected-phase={{selectedPhase}}></pb-project-phase>
        <p>Selected Phase: {{selectedPhase}}</p>
    </template>
    <script>
        (function () {
            class PBComponentsDemo extends Polymer.Element {

                static get is() { return 'pb-components-demo'; }

                constructor() {
                    super();
                }

                static get properties() {
                    return {
                        chartData: {
                            type: Array,
                            notify: true,
                            value: PBProjectWidgetTestDataFaker.fakeDataGenerator.generateStore(10)
                        },
                        monthTimestamp: {
                            type: Number,
                            notify: true,
                            value: 1458975342788
                        },
                        placeholderData: {
                            type: Object,
                            notify: true,
                            value: {}
                        },
                        tableData: {
                            type: Array,
                            notify: true,
                            value: PBProjectWidgetTestDataFaker.projectData
                        },
                        tableHeaders: {
                            type: Array,
                            notify: true,
                            value: ['Color', 'Project Name', 'Forecasted', 'Actual', '# of People', 'Start Date', 'End Date']
                        },
                        selectedDate: {
                            type: Object,
                            notify: true,
                            value: null
                        },
                        selectedPhase: {
                            type: String
                        },
                    }
                }

                generateNewChartData() {
                    this.chartData = PBProjectWidgetTestDataFaker.fakeDataGenerator.generateStore(10);
                }

                generatePlaceHolderData() {
                    let newData = PBProjectWidgetTestDataFaker.fakeDataGenerator.generateStore(1)[0];
                    this.set('placeholderData', {
                        startDate: newData.projectedStartDate,
                        endDate: newData.projectedEndDate,
                    });
                }
                updateSelectedDate() {
                    if (Math.random() > 0.1) {
                        let year = Math.floor(Math.random() * 6) + 2012;
                        let month = Math.floor(Math.random() * 12);
                        let day = Math.floor(Math.random() * 28) + 1;
                        this.selectedDate = new Date(year, month, day);
                    }
                    else  this.selectedDate = null;

                }
            }
            customElements.define(PBComponentsDemo.is, PBComponentsDemo);
        })();
    </script>

</dom-module>